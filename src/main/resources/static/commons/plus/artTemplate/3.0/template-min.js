/*!
 * artTemplate - Template Engine
 * https://github.com/aui/artTemplate
 * Released under the MIT, BSD, and GPL Licenses
 */
;!(function(){var z=function(A,B){return typeof B==="string"?i(B,{filename:A}):n(A,B)};z.version="3.0.0";z.config=function(A,B){k[A]=B};var k=z.defaults={openTag:"<%",closeTag:"%>",escape:true,cache:true,compress:false,parser:null};var d=z.cache={};z.render=function(B,A){return i(B,A)};var n=z.renderFile=function(A,C){var B=z.get(A)||q({filename:A,name:"Render Error",message:"Template not found"});return C?B(C):B};z.get=function(B){var A;if(d[B]){A=d[B]}else{if(typeof document==="object"){var C=document.getElementById(B);if(C){var D=(C.value||C.innerHTML).replace(/^\s*|\s*$/g,"");A=i(D,{filename:B})}}}return A};var w=function(B,A){if(typeof B!=="string"){A=typeof B;if(A==="number"){B+=""}else{if(A==="function"){B=w(B.call(B))}else{B=""}}}return B};var h={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"};var a=function(A){return h[A]};var t=function(A){return w(A).replace(/&(?![\w#]+;)|[<>"']/g,a)};var l=Array.isArray||function(A){return({}).toString.call(A)==="[object Array]"};var c=function(C,D){var B,A;if(l(C)){for(B=0,A=C.length;B<A;B++){D.call(C,C[B],B,C)}}else{for(B in C){D.call(C,C[B],B)}}};var y=z.utils={$helpers:{},$include:n,$string:w,$escape:t,$each:c};z.helper=function(A,B){u[A]=B};var u=z.helpers=y.$helpers;z.onerror=function(C){var B="Template Error\n\n";for(var A in C){B+="<"+A+">\n"+C[A]+"\n\n"}if(typeof console==="object"){console.error(B)}};var q=function(A){z.onerror(A);return function(){return"{Template Error}"}};var i=z.compile=function(F,C){C=C||{};for(var B in k){if(C[B]===undefined){C[B]=k[B]}}var A=C.filename;try{var D=p(F,C)}catch(G){G.filename=A||"anonymous";G.name="Syntax Error";return q(G)}function E(H){try{return new D(H,A)+""}catch(I){if(!C.debug){C.debug=true;return i(F,C)(H)}return q(I)()}}E.prototype=D.prototype;E.toString=function(){return D.toString()};if(A&&C.cache){d[A]=E}return E};var x=y.$each;var b="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined";var g=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g;var m=/[^\w$]+/g;var f=new RegExp(["\\b"+b.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g");var r=/^\d[^,]*|,\d[^,]*/g;var j=/^,+|,+$/g;var o=/^$|,+/;function s(A){return A.replace(g,"").replace(m,",").replace(f,"").replace(r,"").replace(j,"").split(o)}function v(A){return"'"+A.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function p(O,E){var M=E.debug;var K=E.openTag;var G=E.closeTag;var C=E.parser;var S=E.compress;var P=E.escape;var I=1;var N={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1};var U="".trim;var W=U?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"];var F=U?"$out+=text;return $out;":"$out.push(text);";var D="function(){var text=''.concat.apply('',arguments);"+F+"}";var A="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+F+"}";var L="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(M?"$line=0,":"");var Q=W[0];var J="return new String("+W[3]+");";x(O.split(K),function(Z){Z=Z.split(G);var Y=Z[0];var X=Z[1];if(Z.length===1){Q+=H(Y)}else{Q+=R(Y);if(X){Q+=H(X)}}});var B=L+Q+J;if(M){B="try{"+B+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+v(O)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}"}try{var V=new Function("$data","$filename",B);V.prototype=y;return V}catch(T){T.temp="function anonymous($data,$filename) {"+B+"}";throw T}function H(X){I+=X.split(/\n/).length-1;if(S){X=X.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")}if(X){X=W[1]+v(X)+W[2]+"\n"}return X}function R(aa){var ab=I;if(C){aa=C(aa,E)}else{if(M){aa=aa.replace(/\n/g,function(){I++;return"$line="+I+";"})}}if(aa.indexOf("=")===0){var X=P&&!/^=[=#]/.test(aa);aa=aa.replace(/^=[=#]?|[\s;]*$/g,"");if(X){var Z=aa.replace(/\s*\([^\)]+\)/,"");if(!y[Z]&&!/^(include|print)$/.test(Z)){if(aa.indexOf(".")>0){var Y=aa.split(".");aa="$escape("+Y[0]+"==undefined?"+Y[0]+":"+aa+")"}else{aa="$escape("+aa+")"}}}else{aa="$string("+aa+")"}aa=W[1]+aa+W[2]}if(M){aa="$line="+ab+";"+aa}x(s(aa),function(ac){if(!ac||N[ac]){return}var ad;if(ac==="print"){ad=D}else{if(ac==="include"){ad=A}else{if(y[ac]){ad="$utils."+ac}else{if(u[ac]){ad="$helpers."+ac}else{ad="$data."+ac}}}}L+=ac+"="+ad+",";N[ac]=true});return aa+"\n"}}k.openTag="{{";k.closeTag="}}";var e=function(E,C){var D=C.split(":");var B=D.shift();var A=D.join(":")||"";if(A){A=", "+A}return"$helpers."+B+"("+E+A+")"};k.parser=function(A,O){A=A.replace(/^\s/,"");var K=A.split(" ");var M=K.shift();var J=K.join(" ");switch(M){case"if":A="if("+J+"){";break;case"else":if(K.shift()==="if"){K=" if("+K.join(" ")+")"}else{K=""}A="}else"+K+"{";break;case"/if":A="}";break;case"each":var E=K[0]||"$data";var D=K[1]||"as";var L=K[2]||"$value";var H=K[3]||"$index";var C=L+","+H;if(D!=="as"){E="[]"}A="$each("+E+",function("+C+"){";break;case"/each":A="});";break;case"echo":A="print("+J+");";break;case"print":case"include":A=M+"("+K.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(J)){var N=true;if(A.indexOf("#")===0){A=A.substr(1);N=false}var F=0;var I=A.split("|");var G=I.length;var B=I[F++];for(;F<G;F++){B=e(B,I[F])}A=(N?"=":"=#")+B}else{if(z.helpers[M]){A="=#"+M+"("+K.join(",")+");"}else{A="="+A}}break}return A};if(typeof define==="function"){define(function(){return z})}else{if(typeof exports!=="undefined"){module.exports=z}else{this.template=z}}})();